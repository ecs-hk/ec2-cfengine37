# Managed by CFEngine

Port 22
AddressFamily inet
Protocol 2

SyslogFacility AUTH

PermitRootLogin without-password
StrictModes yes
AuthorizedKeysFile .ssh/authorized_keys

PubkeyAuthentication yes
RSAAuthentication no
RhostsRSAAuthentication no
HostbasedAuthentication no
PasswordAuthentication no
PermitEmptyPasswords no
ChallengeResponseAuthentication no
KerberosAuthentication no
GSSAPIAuthentication no
UsePAM yes

# Mustache derived section begin --------------------------------------------

{{#classes.amzn_2015_09}}
UsePrivilegeSeparation sandbox
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key
{{/classes.amzn_2015_09}}

{{#classes.redhat_7}}
UsePrivilegeSeparation sandbox
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key
{{/classes.redhat_7}}

{{#classes.redhat_6}}
UsePrivilegeSeparation yes
HostKey /etc/ssh/ssh_host_rsa_key
{{/classes.redhat_6}}

# Mustache derived section end --------------------------------------------

Banner /etc/ssh/banner
PrintMotd yes

# Accept locale-related environment variables
AcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES
AcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT
AcceptEnv LC_IDENTIFICATION LC_ALL LANGUAGE
AcceptEnv XMODIFIERS

Subsystem sftp	/usr/libexec/openssh/sftp-server
